# Деплой на Railway

## Подготовка к деплою

1. Убедитесь, что у вас есть аккаунт на [Railway](https://railway.com/)
2. Убедитесь, что ваш проект загружен на GitHub
3. Подготовьте следующие данные:
   - Twitch OAuth токен для бота
   - Имя пользователя Twitch бота
   - URL и ключ Supabase

## Создание проекта на Railway

1. Перейдите на [Railway Dashboard](https://railway.app/dashboard)
2. Нажмите кнопку "New Project"
3. Выберите "Deploy from GitHub repo"
4. Подключите ваш репозиторий с twitch-giveaway-bot
5. Railway автоматически определит, что это Node.js приложение

## Настройка переменных окружения

1. После создания проекта перейдите в Dashboard вашего проекта
2. Откройте вкладку "Variables"
3. Добавьте следующие переменные окружения:
   - `TWITCH_OAUTH_TOKEN` - ваш Twitch OAuth токен
   - `TWITCH_BOT_USERNAME` - имя пользователя вашего Twitch бота
   - `SUPABASE_URL` - URL вашего Supabase проекта
   - `SUPABASE_KEY` - анонимный ключ вашего Supabase проекта

## Конфигурация Railway

Railway будет использовать следующие файлы для конфигурации:
- `railway.toml` - основная конфигурация
- `Dockerfile` - для сборки контейнера
- `package.json` - для управления зависимостями

## Health Check

Railway автоматически будет проверять эндпоинт `/health` для проверки состояния приложения. Этот эндпоинт возвращает статус 200 и JSON с информацией о состоянии приложения.

## Автоматический деплой

После первоначальной настройки Railway автоматически пересоберет и задеплоит приложение при каждом пуше в репозиторий.

## Мониторинг

Вы можете отслеживать логи и состояние приложения в Dashboard Railway:
1. Перейдите в Dashboard вашего проекта
2. Выберите ваше приложение
3. Откройте вкладку "Logs" для просмотра логов
4. Откройте вкладку "Settings" для управления настройками

## Масштабирование

Railway автоматически масштабирует ваше приложение в зависимости от нагрузки. Вы можете вручную настроить масштабирование в настройках проекта.

## Устранение неполадок

Если деплой не удался:
1. Проверьте логи в Dashboard Railway
2. Убедитесь, что все переменные окружения установлены правильно
3. Проверьте, что ваш репозиторий не содержит синтаксических ошибок
4. Убедитесь, что Dockerfile корректно описывает процесс сборки