# Инструкция по настройке проекта

## Предварительные требования

1. Установите [Node.js](https://nodejs.org/) (версия 16 или выше)
2. Установите [Git](https://git-scm.com/) 
3. Создайте аккаунт на [Supabase](https://supabase.io/)
4. Создайте аккаунт на [Railway](https://railway.com/)

## Локальная настройка

1. Клонируйте репозиторий:
   ```
   git clone <URL_вашего_репозитория>
   ```

2. Перейдите в директорию проекта:
   ```
   cd twitch-giveaway-bot
   ```

3. Установите зависимости:
   ```
   npm install
   ```

4. Создайте файл `.env` на основе `.env.example`:
   ```
   cp .env.example .env
   ```

5. Заполните переменные окружения в файле `.env`:
   - Получите Twitch OAuth токен на https://twitchapps.com/tmi/
   - Получите Supabase URL и ключ из вашей панели управления Supabase

6. Создайте таблицы в Supabase:
   - Перейдите в SQL Editor в панели управления Supabase
   - Выполните SQL скрипты из файла `SUPABASE_SCHEMA.md`

7. Запустите приложение в режиме разработки:
   ```
   npm run dev
   ```

## Деплой на Railway

1. Зарегистрируйтесь на [Railway](https://railway.com/)

2. Создайте новый проект:
   - Нажмите "New Project"
   - Выберите "Deploy from GitHub repo"
   - Подключите ваш репозиторий с twitch-giveaway-bot

3. Railway автоматически определит, что это Node.js приложение и применит нужные настройки

4. Настройте переменные окружения:
   - Перейдите в Dashboard вашего проекта
   - Откройте вкладку "Variables"
   - Добавьте следующие переменные:
     - TWITCH_OAUTH_TOKEN=ваш_токен
     - TWITCH_BOT_USERNAME=имя_вашего_бота
     - SUPABASE_URL=ваш_supabase_url
     - SUPABASE_KEY=ваш_supabase_ключ

5. Настройте health-check:
   - Railway автоматически будет проверять эндпоинт `/health` для проверки состояния приложения

6. После настройки Railway автоматически пересоберет и задеплоит приложение при каждом пуше в репозиторий

## Настройка Twitch бота

1. Создайте нового Twitch бота на https://dev.twitch.tv/console/apps
2. Получите OAuth токен для бота на https://twitchapps.com/tmi/
3. Добавьте бота в ваш Twitch канал через веб-интерфейс приложения

## Использование

1. Откройте веб-интерфейс приложения (доступен по URL, который Railway предоставит после деплоя)
2. Авторизуйтесь через Twitch
3. Добавьте бота в ваш канал
4. Начните розыгрыш с помощью команды `!startgiveaway <ключевое_слово> <приз>` в чате Twitch
5. Завершите розыгрыш с помощью команды `!endgiveaway` в чате Twitch